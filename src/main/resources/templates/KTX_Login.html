<!DOCTYPE html>
<html>
<head>
    <title>User Login</title>
</head>
<body>
<label for="email">Email:</label>
<input type="email" id="email" name="email"><br><br>

<label for="password">Password:</label>
<input type="password" id="password" name="password"><br><br>

<button type="button" onclick="loginForm()">login</button>

<script>
    function loginForm() {
        var userEmail = document.getElementById("email").value; // 이메일 입력란 값 가져오기
        var userPassword = document.getElementById("password").value; // 비밀번호 입력란 값 가져오기

        var userData = {
            email: userEmail,
            password: userPassword
        }; // 사용자 입력 데이터를 객체로 생성

        fetch("/api/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(userData) // 사용자 입력 데이터를 JSON 형식으로 변환하여 서버에 전송
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(data.message); // 성공적으로 로그인한 경우 메시지를 알림으로 띄움
                // 로그인 성공 후 원하는 페이지로 이동할 수 있도록 처리
                location.href = '/KTX_LoginedMain';
            } else {
                alert("로그인 실패 : " + data.message); // 로그인에 실패한 경우 메시지를 알림으로 띄움
                // 여기에 필요한 추가 동작을 수행할 수 있습니다.
            }
        })
        .catch(error => {
            console.error('오류 발생:', error);
            // 오류가 발생했을 때 처리할 내용을 추가할 수 있습니다.
        });
    }
</script>
</body>
</html>